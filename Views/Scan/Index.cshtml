@{
	ViewData["Title"] = "Auto ABC1234 Detection";
}

<div class="container mt-4">
	<h2 class="text-center mb-4">🎯 Auto ABC1234 Number Plate Detection</h2>

	<div id="status" class="alert alert-info text-center">
		📦 Loading auto-detection system... Please wait.
	</div>

	<div id="cameraSection" style="display:none;" class="text-center">
		<div class="position-relative d-inline-block mb-3">
			<video id="video" width="640" height="480" autoplay playsinline muted class="border rounded"></video>
			<canvas id="canvas" width="640" height="480" style="display:none;"></canvas>
		</div>
		<br>

		<!-- Live Detection Display -->
		<div id="liveDetection" class="mb-3" style="display:none;">
			<div class="card border-success">
				<div class="card-header bg-success text-white">
					<h5 class="mb-0">📱 Auto-Detected ABC1234 Plate</h5>
				</div>
				<div class="card-body">
					<h3 id="detectedPlateId" class="text-success font-weight-bold">-</h3>
					<p class="mb-0">Detected from: <span id="detectionSource">-</span></p>
					<small class="text-muted">Confidence: <span id="detectionConfidence">-</span>% | Count: <span id="liveDetectionCount">0</span></small>
				</div>
			</div>
		</div>

		<div id="result" class="mt-3"></div>
	</div>

	<!-- Instructions Card -->
	<div class="card mt-4">
		<div class="card-header">
			<h5 class="mb-0">📋 Auto-Detection Instructions</h5>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="col-md-6">
					<h6>✅ For Best Auto-Detection:</h6>
					<ul class="small">
						<li>📱 Display ABC1234 plate clearly on phone screen</li>
						<li>💡 Ensure bright, even lighting</li>
						<li>🎯 Keep plate centered in camera view</li>
						<li>📏 Fill about 1/3 of camera view with the plate</li>
						<li>⚡ Hold steady - auto-capture when detected</li>
					</ul>
				</div>
				<div class="col-md-6">
					<h6>🤖 Auto-Processing:</h6>
					<ul class="small">
						<li>🔍 Continuously scans for ABC1234 format</li>
						<li>📸 Auto-captures when valid plate detected</li>
						<li>🗄️ Checks database for matching bin</li>
						<li>💾 Creates collection record automatically</li>
						<li>🖼️ Saves image to database</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</div>

@section Scripts {
	<script src="~/js/Scan.js"></script>
}
